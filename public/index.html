<!DOCTYPE html>
<html>
<head>
  <title>Painel RSI ‚Äì On-Chain SetValues</title>
  <meta charset="UTF-8">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f2f2f2;
      padding: 20px;
    }
    input, button {
      padding: 12px;
      font-size: 18px;
    }
    input[type="email"] {
      width: 350px;
    }
    button {
      margin-left: 10px;
      background-color: #00b894;
      color: white;
      border: none;
      cursor: pointer;
    }
    #mensagem {
      margin-top: 10px;
      font-size: 16px;
      font-weight: bold;
    }
    #painel { display: none; margin-top: 20px; }
    #debug { margin-top: 20px; font-size: 14px; background: #eee; padding: 10px; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <h2>Painel RSI ‚Äì Criptomoedas em Alta</h2>

  <div id="login">
    <p>Digite seu e-mail autorizado:</p>
    <input type="email" id="email" value="valdiram.lima.2013@gmail.com" placeholder="seu@email.com">
    <button onclick="verificarEmail()">Entrar</button>
    <p id="mensagem"></p>
    <div id="debug"></div>
  </div>

  <div id="painel">
    <h3>Painel liberado ‚úÖ</h3>
    <p>Aqui entraria a tabela com as criptos...</p>
  </div>

  <script>
    const URL_BASE = "https://script.google.com/macros/s/AKfycbxRwe1RRn0ZW7wyyhNcurCP6DUVePB2599ms5VieNSfgNvTD06abWqhH_cX_eA_lkK_Qg/exec";

    function verificarEmail() {
      const email = document.getElementById("email").value.trim();
      const mensagem = document.getElementById("mensagem");
      const debug = document.getElementById("debug");

      if (!email) {
        mensagem.innerText = "‚ùå Informe um e-mail.";
        mensagem.style.color = "red";
        return;
      }

      const url = `${URL_BASE}?email=${encodeURIComponent(email)}`;

      // Mostrar link e status
      mensagem.innerText = "üîÑ Verificando...";
      mensagem.style.color = "black";
      debug.innerHTML = `<strong>URL gerada:</strong> ${url}`;

      fetch(url)
        .then(res => res.text())
        .then(msg => {
          mensagem.innerText = msg;

          if (msg.includes("‚úÖ")) {
            mensagem.style.color = "green";
            document.getElementById("login").style.display = "none";
            document.getElementById("painel").style.display = "block";
          } else {
            mensagem.style.color = "red";
          }

          debug.innerHTML += `<br><strong>Resposta recebida:</strong> ${msg}`;
        })
        .catch(err => {
          mensagem.innerText = "‚ùå Erro de conex√£o.";
          mensagem.style.color = "red";
          debug.innerHTML += `<br><strong>Erro:</strong> ${err.message}`;
        });
    }
  </script>
</body>
</html>
