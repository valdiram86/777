<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>On-Chain SetValues ‚Äì Onda de Alta</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css" />
  <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.dataTables.min.css" />
  <style>
    body {
      background: #f2f2f2;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }
    h1 { text-align: center; }
    #loginExterno, #painelInterno, #mensagemInterna, #tabela, #filtrosExtras {
      max-width: 900px;
      margin: 0 auto;
    }
    #loginBox {
      background: #ffffff;
      padding: 30px;
      border-radius: 10px;
      margin-bottom: 30px;
    }
    #painelExplicativo {
      background: #e6e6e6;
      padding: 20px;
      border-left: 5px solid #444;
      margin-bottom: 30px;
    }
    .botaoAba {
      padding: 10px 20px;
      margin: 5px;
      cursor: pointer;
      background: #444;
      color: white;
      border: none;
      border-radius: 5px;
    }
    .botaoAba:hover {
      background: #666;
    }
  </style>
</head>
<body>
  <div id="loginExterno">
    <h1>On-Chain SetValues</h1>
    <div id="painelExplicativo">
      <p><strong>Bem-vindo ao radar de moedas em onda de alta.</strong></p>
      <p>Este painel apresenta criptomoedas que est√£o demonstrando for√ßa no curto prazo (1 dia), com base em varia√ß√µes de pre√ßo, volume e RSI.</p>
      <p>Entre com seu e-mail autorizado para acessar o painel completo.</p>
      <p><strong>Contato:</strong> <a href="mailto:onchainsetvalues@gmail.com">onchainsetvalues@gmail.com</a> ‚Äî <a href="https://wa.me/5521982252303" target="_blank">WhatsApp (21) 98225-2303</a></p>
    </div>
    <div id="loginBox">
      <label for="email">Digite seu e-mail:</label>
      <input type="email" id="email" placeholder="email@email.com" />
      <button onclick="verificarEmail()">Entrar</button>
    </div>
  </div>

  <div id="painelInterno" style="display:none;">
    <h1>Criptomoedas em Onda de Alta</h1>

    <div id="mensagemInterna">
      <p><strong>Explica√ß√£o das cores:</strong></p>
      <ul>
        <li><span style="color: #006400;"><strong>Verde escuro</strong></span>: moedas com varia√ß√£o di√°ria acima de 20%</li>
        <li><span style="color: #32CD32;"><strong>Verde m√©dio</strong></span>: varia√ß√£o entre 10% e 20%</li>
        <li><span style="color: #90EE90;"><strong>Verde claro</strong></span>: varia√ß√£o entre 5% e 10%</li>
      </ul>
    </div>

    <div id="filtrosExtras">
      <button class="botaoAba" onclick="carregarAba('OndaDeAlta_5')">Varia√ß√£o 5%</button>
      <button class="botaoAba" onclick="carregarAba('OndaDeAlta_7_5')">Varia√ß√£o 7.5%</button>
      <button class="botaoAba" onclick="carregarAba('OndaDeAlta_10')">Varia√ß√£o 10%</button>
    </div>

    <table id="tabela" class="display nowrap" style="width:100%;">
      <thead>
        <tr>
          <th>Ranking</th>
          <th>S√≠mbolo</th>
          <th>Link</th>
          <th>RSI (1D)</th>
          <th>Varia√ß√£o 1D (%)</th>
          <th>Volume (24h)</th>
          <th>Holders</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

  <script>
    const ENDPOINT = "https://script.google.com/macros/s/AKfycbzC2ddkGRxrrCYT5ePg0yq2yAHeGkg70cjXWwfio7ZBH1wuQdbrALYq9o4-QNotHj-eiQ/exec";
    let emailAutorizado = "";

    function verificarEmail() {
      const email = document.getElementById("email").value.trim();
      if (!email) return alert("Digite um e-mail v√°lido.");
      fetch(`${ENDPOINT}?email=${email}`)
        .then(res => res.json())
        .then(dados => {
          if (dados.autorizado) {
            emailAutorizado = email;
            document.getElementById("loginExterno").style.display = "none";
            document.getElementById("painelInterno").style.display = "block";
            carregarAba('OndaDeAlta_10'); // padr√£o inicial
          } else {
            alert("Acesso n√£o autorizado.");
          }
        });
    }

    function carregarAba(aba) {
      fetch(`${ENDPOINT}?email=${emailAutorizado}&aba=${aba}`)
        .then(res => res.json())
        .then(dados => {
          const tabela = $('#tabela').DataTable();
          tabela.clear();
          tabela.rows.add(dados.dados).draw();
        });
    }

    $(document).ready(function () {
      $('#tabela').DataTable({
        paging: false,
        scrollX: true,
        dom: 'Bfrtip',
        buttons: [
          {
            extend: 'csv',
            text: 'üìä Exportar CSV',
            filename: () => 'onda-de-alta-' + new Date().toISOString().slice(0,10)
          },
          {
            extend: 'pdf',
            text: 'üìÑ Exportar PDF',
            filename: () => 'onda-de-alta-' + new Date().toISOString().slice(0,10),
            orientation: 'landscape',
            pageSize: 'A4'
          }
        ]
      });
    });
  </script>
</body>
</html>
